{% extends 'base.html' %}
{% block body %}
<div id="chat-container" class="container">

    <h2>Chat</h2>

    <div id="current-chat-container" class="container">
        <table class="">
            <tbody class="" id="chat-table">
                {% if chat %}
                {% include 'chat_table.html' %}
                {% endif %}
            </tbody>
        </table>
    </div>

    <form id="chat-form" hx-post="/chat" hx-target="#chat-table" hx-indicator="#chat-backdrop">
        <label>
            Enter your message:
            <input type="text" name="user_message" id="user-message" minlength="1" maxlength="200" required>
        </label>
        <input id="chat-form-submit" type="submit" class="hide" />
        <button class="btn modal-trigger indigo darken-4" id="submit-message">Submit</button>
    </form>
    <div id="chatbot-buttons">
        <a href="/chat/new"><button class="btn modal-trigger indigo darken-4">Start New Chat</button></a>
        <a href="/history"><button class="btn modal-trigger indigo darken-4">View Chat History</button></a>
    </div>
</div>

<div id="chat-backdrop" class="htmx-indicator">

    <!-- By Sam Herbert (@sherb), for everyone. More @ http://goo.gl/7AJzbL -->
    <svg id="loader" width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#1a5e20">
        <g fill="none" fill-rule="evenodd">
            <g transform="translate(1 1)" stroke-width="2">
                <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>
                <path d="M36 18c0-9.94-8.06-18-18-18">
                    <animateTransform
                        attributeName="transform"
                        type="rotate"
                        from="0 18 18"
                        to="360 18 18"
                        dur="1s"
                        repeatCount="indefinite"/>
                </path>
            </g>
        </g>
    </svg>

</div>
{% endblock %}
